# 回溯法 - 不進則退

概念：概念：當節點不滿足求解條件時，就回溯。嘗試其他的路徑。

​    「能進則進，進不了則換，換不了則退的搜尋方法」。

題目:

假設n個物品和1個購物車，每個物品i對應價值為v_i  ，重量w_i ，購物車的容量為W 。如何選取物品裝入購物車讓物品的總價值最大?

要求輸出最優值(裝入最大價值)和最優解(裝入哪些物品)。

要素：

1.解空間:

​	x_1,x_2,x_3…,x_n} => {x_1,x_2,x_3}，顯示限制 x_i=0或者x_i=1，i=1,2,…,n。

2.解空間的組織結構:

​	確認解空間的組織結構: {0, 0, 0}，{0, 0, 1}，{0, 1, 0}，{1, 0, 0}，{0, 1, 1}，{1, 0, 1}，{1, 1, 0}。該問題有2^3 個可能解。

3.搜尋解空間  

​	隱式限制包含限制函數和限界函數，隱式限制(剪枝函數)指對能否得到問題的可行解或最優解做出的限制。 

- 限制函數:是否得到問題的可行解的限制。 (控制解空間的大小、決定剪枝的效率)

- 限界函數:是否得到最優解的限制。 

  
  $$
  限制條件: ∑{^n_1}w_i x_i≤W
  $$

  $$
  限界條件: cp+rp>bestrp
  $$

  $$
  cp=目前已裝入購物車的物品總價值。
  $$

  $$
  rp= 第t+1種到第n種物品的總價值。
  $$

  

![1577268098057](C:\Users\BoRenFu\AppData\Roaming\Typora\typora-user-images\1577268098057.png)

3.搜尋過程:

沿著擴展節點的左分支擴展，代表裝入物品，判斷限制條件是否成立，成立生成左子節點；如果不成立，則減掉左分支，沿著右分支擴展，如果右分支不放入代表物品，沿著右分支擴展有沒有可能得到最優解，就需要限界條件。

如果限界條件滿足，即生成右子節點，不滿足限界條件則剪掉擴展節點的右分支，搜尋過程直到所有活節點變成死節點結束。